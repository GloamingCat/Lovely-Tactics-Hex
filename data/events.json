[
  {
    "data": {
      "events": [
        {
          "condition": "",
          "name": "turnCharTile",
          "tags": [
            {
              "key": "key",
              "value": "\"player\""
            },
            {
              "key": "other",
              "value": "\"self\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "turnCharTile",
          "tags": [
            {
              "key": "key",
              "value": "\"self\""
            },
            {
              "key": "other",
              "value": "\"player\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "showDialogue",
          "tags": [
            {
              "key": "id",
              "value": "1"
            },
            {
              "key": "character",
              "value": "\"self\""
            },
            {
              "key": "portrait",
              "value": "\"BigIcon\""
            },
            {
              "key": "message",
              "value": "\"{%dialogues.npc.Hi}\""
            }
          ],
          "key": ""
        },
        {
          "condition": "TroopManager:getPlayerTroop():hasMember('Merlin')",
          "name": "jumpTo",
          "tags": [
            {
              "key": "name",
              "value": "\"dialogueEnd\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "showDialogue",
          "tags": [
            {
              "key": "id",
              "value": "1"
            },
            {
              "key": "character",
              "value": "\"self\""
            },
            {
              "key": "portrait",
              "value": "\"BigIcon\""
            },
            {
              "key": "message",
              "value": "\"{%dialogues.npc.CanIJoin}\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "openChoiceWindow",
          "tags": [
            {
              "key": "width",
              "value": "50"
            },
            {
              "key": "y",
              "value": "-20"
            },
            {
              "key": "choices",
              "value": "[\"yes\", \"no\"]"
            }
          ],
          "key": ""
        },
        {
          "condition": "script.vars.choiceInput == 1",
          "name": "showDialogue",
          "tags": [
            {
              "key": "id",
              "value": "1"
            },
            {
              "key": "character",
              "value": "\"self\""
            },
            {
              "key": "portrait",
              "value": "\"BigIcon\""
            },
            {
              "key": "message",
              "value": "\"{%dialogues.npc.ThatsGood}\""
            }
          ],
          "key": ""
        },
        {
          "condition": "script.vars.choiceInput == 1",
          "name": "addMember",
          "tags": [
            {
              "key": "key",
              "value": "\"Merlin\""
            }
          ],
          "key": ""
        },
        {
          "condition": "script.vars.choiceInput == 2",
          "name": "showDialogue",
          "tags": [
            {
              "key": "id",
              "value": "1"
            },
            {
              "key": "character",
              "value": "\"self\""
            },
            {
              "key": "portrait",
              "value": "\"BigIcon\""
            },
            {
              "key": "message",
              "value": "\"{%dialogues.npc.ThatsBad}\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "setLabel",
          "tags": [
            {
              "key": "name",
              "value": "\"dialogueEnd\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "closeDialogueWindow",
          "tags": [
            {
              "key": "id",
              "value": "1"
            }
          ],
          "key": ""
        }
      ],
      "description": "Merlins asks if he can join the party.",
      "name": "Merlin",
      "tags": [],
      "key": "Merlin"
    },
    "id": 0,
    "children": []
  },
  {
    "data": {
      "events": [
        {
          "condition": "",
          "name": "print(script.char.vars.cooldown)",
          "tags": [],
          "key": ""
        },
        {
          "condition": "",
          "name": "script.vars.deltaBattleTime = GameManager.frame - (GameManager.vars.lastBattleTime or -60)",
          "tags": [],
          "key": ""
        },
        {
          "condition": "not FieldManager.playerInput or not script:collidedWith('player') or script.vars.deltaBattleTime <= 60",
          "name": "jumpTo",
          "tags": [
            {
              "key": "name",
              "value": "\"end\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "FieldManager.player:playIdleAnimation()",
          "tags": [],
          "key": ""
        },
        {
          "condition": "",
          "name": "turnCharTile",
          "tags": [
            {
              "key": "key",
              "value": "\"player\""
            },
            {
              "key": "other",
              "value": "\"self\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "turnCharTile",
          "tags": [
            {
              "key": "key",
              "value": "\"self\""
            },
            {
              "key": "other",
              "value": "\"player\""
            }
          ],
          "key": ""
        },
        {
          "condition": "script.char.collided ~= \"player\"",
          "name": "showEmotionBalloon",
          "tags": [
            {
              "key": "key",
              "value": "\"self\""
            },
            {
              "key": "emotion",
              "value": "\"!\""
            }
          ],
          "key": ""
        },
        {
          "condition": "script.char.collided == \"player\"",
          "name": "showEmotionBalloon",
          "tags": [
            {
              "key": "key",
              "value": "\"player\""
            },
            {
              "key": "emotion",
              "value": "\"!\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "wait",
          "tags": [
            {
              "key": "time",
              "value": "30"
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "startBattle",
          "tags": [
            {
              "key": "skipIntro",
              "value": "false"
            },
            {
              "key": "disableEscape",
              "value": "false"
            },
            {
              "key": "gameOverCondition",
              "value": "\"survive\""
            },
            {
              "key": "fieldID",
              "value": "0"
            },
            {
              "key": "fade",
              "value": "60"
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "GameManager.vars.lastBattleTime = GameManager.frame",
          "tags": [],
          "key": ""
        },
        {
          "condition": "",
          "name": "script.vars.escaped = BattleManager:playerEscaped()",
          "tags": [],
          "key": ""
        },
        {
          "condition": "script.vars.escaped",
          "name": "script.char.vars.cooldown = 180",
          "tags": [],
          "key": ""
        },
        {
          "condition": "not script.vars.escaped",
          "name": "hideChar",
          "tags": [
            {
              "key": "key",
              "value": "\"self\""
            },
            {
              "key": "deactivate",
              "value": "false"
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "finishBattle",
          "tags": [
            {
              "key": "fade",
              "value": "60"
            },
            {
              "key": "wait",
              "value": "true"
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "print(script.battleLog)",
          "tags": [],
          "key": ""
        },
        {
          "condition": "script.vars.escaped",
          "name": "jumpTo",
          "tags": [
            {
              "key": "name",
              "value": "\"end\""
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "script.char.vars.defeated = true",
          "tags": [],
          "key": ""
        },
        {
          "condition": "",
          "name": "deleteChar",
          "tags": [
            {
              "key": "key",
              "value": "\"self\""
            },
            {
              "key": "permanent",
              "value": "false"
            }
          ],
          "key": ""
        },
        {
          "condition": "",
          "name": "setLabel",
          "tags": [
            {
              "key": "name",
              "value": "\"end\""
            }
          ],
          "key": ""
        }
      ],
      "description": "Starts a battle encounter.",
      "name": "Battle",
      "tags": [],
      "key": "Battle"
    },
    "id": 1,
    "children": []
  }
]